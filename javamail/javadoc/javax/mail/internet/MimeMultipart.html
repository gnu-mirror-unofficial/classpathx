<html xmlns="http://www.w3.org/TR/REC-html40" xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:gjdoc="http://www.gnu.org/software/cp-tools/gjdocxml"><head><link href="../../../gjdochtml.css" type="text/css" rel="stylesheet"/><title>MimeMultipart</title></head><body onload="top.document.title=document.title;" class="classdoc"><div class="header"><span class="navi-button">&rArr;&nbsp;<a target="_top" href="../../../index.html">Index&nbsp;(Frames)</a></span>&nbsp;|&nbsp;
      <span class="navi-button">&rArr;&nbsp;<a target="_top" href="../../../index_noframes.html">Index&nbsp;(No&nbsp;Frames)</a></span>&nbsp;|&nbsp;
      <span class="navi-button">&rArr;&nbsp;<a href="package-summary.html">Package</a></span>&nbsp;|&nbsp;
      <span class="navi-button">&rArr;&nbsp;<a href="package-tree.html">Package&nbsp;Tree</a></span>&nbsp;|&nbsp;
      <span class="navi-button">&rArr;&nbsp;<a href="../../../fulltree.html">Full Tree</a></span>&nbsp;
    </div><div class="classdoc-head"><div class="classdoc-head-inner"><b class="classdoc-head-packagename">javax.mail.internet</b><br/><h1 class="classdoc-head-classname">Class MimeMultipart</h1></div></div><pre class="inheritance-tree">java.lang.Object
|
+--<a href="../../../javax/mail/Multipart.html">javax.mail.Multipart</a>
   |
   +--javax.mail.internet.MimeMultipart
</pre><p/><b>Known Direct Subclasses:</b><br/><a href="../../../gnu/mail/providers/imap/IMAPMultipart.html">IMAPMultipart</a><hr/><div class="classdoc-prototype">public class <b>MimeMultipart</b><br/>extends <a href="../../../javax/mail/Multipart.html">Multipart</a><br/></div><p/><div class="classdoc-class-comment-body"> The MimeMultipart class is an implementation of the abstract Multipart 
 class that uses MIME conventions for the multipart data.
 <p/>
 A MimeMultipart is obtained from a MimePart whose primary type is
 "multipart" (by invoking the part's <code>getContent()</code> method)
 or it can be created by a client as part of creating a new MimeMessage.
 <p/>
 The default multipart subtype is "mixed".
 The other multipart subtypes, such as "alternative", "related", and so on,
 can be implemented as subclasses of MimeMultipart with additional methods 
 to implement the additional semantics of that type of multipart content.
 The intent is that service providers, mail JavaBean writers and mail 
 clients will write many such subclasses and their Command Beans,
 and will install them into the JavaBeans Activation Framework,
 so that any JavaMail implementation and its clients can transparently 
 find and use these classes.
 Thus, a MIME multipart handler is treated just like any other type handler,
 thereby decoupling the process of providing multipart handlers from 
 the JavaMail API. Lacking these additional MimeMultipart subclasses,
 all subtypes of MIME multipart data appear as MimeMultipart objects.
 <p/>
 An application can directly construct a MIME multipart object of any 
 subtype by using the MimeMultipart(String subtype) constructor.
 For example, to create a "multipart/alternative" object,
 use <code>new MimeMultipart("alternative")</code>.
</div><div class="classdoc-tag-section-header">Author:</div><dl class="classdoc-list"><dt/></dl><h1 class="classdoc-header">Field Summary</h1><table class="classdoc-table" width="100%" cellspacing="0" border="1"><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type">DataSource</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#ds">ds</a></p><blockquote class="classdoc-summary-comment"> The DataSource supplying our InputStream.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type">boolean</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#parsed">parsed</a></p><blockquote class="classdoc-summary-comment"> Have we parsed the data from our InputStream yet?
 Defaults to true; set to false when our constructor is given 
 a DataSource with an InputStream that we need to parse.</blockquote></td></tr></table><h1 class="classdoc-header">Constructor Summary</h1><table class="classdoc-table" width="100%" cellspacing="0" border="1"><tr><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#MimeMultipart()">MimeMultipart</a>()</p><blockquote class="classdoc-summary-comment"> Default constructor.</blockquote></td></tr><tr><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#MimeMultipart(String)">MimeMultipart</a>(<span class="parameter">String&nbsp;subtype</span>)</p><blockquote class="classdoc-summary-comment"> Construct a MimeMultipart object of the given subtype.</blockquote></td></tr><tr><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#MimeMultipart(DataSource)">MimeMultipart</a>(<span class="parameter">DataSource&nbsp;ds</span>)</p><blockquote class="classdoc-summary-comment"> Constructs a MimeMultipart object and its bodyparts from the given
 DataSource.</blockquote></td></tr></table><h1 class="classdoc-header">Method Summary</h1><table class="classdoc-table" width="100%" cellspacing="0" border="1"><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> <a href="../../../javax/mail/internet/InternetHeaders.html">InternetHeaders</a></p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#createInternetHeaders(InputStream)">createInternetHeaders</a>(<span class="parameter">InputStream&nbsp;is</span>)</p><blockquote class="classdoc-summary-comment"> Create and return an InternetHeaders object that loads the headers 
 from the given InputStream.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> <a href="../../../javax/mail/internet/MimeBodyPart.html">MimeBodyPart</a></p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#createMimeBodyPart(javax.mail.internet.InternetHeaders,byte[])">createMimeBodyPart</a>(<span class="parameter"><a href="../../../javax/mail/internet/InternetHeaders.html">InternetHeaders</a>&nbsp;headers,</span> <span class="parameter">byte[]&nbsp;content</span>)</p><blockquote class="classdoc-summary-comment"> Create and return a MimeBodyPart object to represent a body part parsed
 from the InputStream.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> <a href="../../../javax/mail/internet/MimeBodyPart.html">MimeBodyPart</a></p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#createMimeBodyPart(InputStream)">createMimeBodyPart</a>(<span class="parameter">InputStream&nbsp;is</span>)</p><blockquote class="classdoc-summary-comment"> Create and return a MimeBodyPart object to represent a body part parsed
 from the InputStream.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> <a href="../../../javax/mail/BodyPart.html">BodyPart</a></p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#getBodyPart(int)">getBodyPart</a>(<span class="parameter">int&nbsp;index</span>)</p><blockquote class="classdoc-summary-comment"> Get the specified BodyPart.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> <a href="../../../javax/mail/BodyPart.html">BodyPart</a></p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#getBodyPart(String)">getBodyPart</a>(<span class="parameter">String&nbsp;CID</span>)</p><blockquote class="classdoc-summary-comment"> Get the MimeBodyPart referred to by the given ContentID (CID).</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> int</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#getCount()">getCount</a>()</p><blockquote class="classdoc-summary-comment"> * Return the number of enclosed BodyPart objects.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> void</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#parse()">parse</a>()</p><blockquote class="classdoc-summary-comment"> Parse the InputStream from our DataSource, constructing the appropriate
 MimeBodyParts.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> void</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#setSubType(String)">setSubType</a>(<span class="parameter">String&nbsp;subtype</span>)</p><blockquote class="classdoc-summary-comment"> Set the subtype.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> void</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#updateHeaders()">updateHeaders</a>()</p><blockquote class="classdoc-summary-comment"> Update headers.</blockquote></td></tr><tr><td class="no-border-r" valign="top" align="right" width="1%"><p class="prototype-type"> void</p></td><td class="with-border" valign="top" align="left"><p class="prototype"><a href="#writeTo(OutputStream)">writeTo</a>(<span class="parameter">OutputStream&nbsp;os</span>)</p><blockquote class="classdoc-summary-comment"> Iterates through all the parts and outputs each Mime part 
 separated by a boundary.</blockquote></td></tr></table><h1 class="classdoc-header">Field Details</h1><a name="ds"/><h3>ds</h3><p class="prototype">protected DataSource <b>ds</b></p><p/><div class="classdoc-comment-body"> The DataSource supplying our InputStream.
</div><p/><hr/><a name="parsed"/><h3>parsed</h3><p class="prototype">protected boolean <b>parsed</b></p><p/><div class="classdoc-comment-body"> Have we parsed the data from our InputStream yet?
 Defaults to true; set to false when our constructor is given 
 a DataSource with an InputStream that we need to parse.
</div><p/><h1 class="classdoc-header">Constructor Details</h1><a name="MimeMultipart()"/><h3>MimeMultipart</h3><p class="prototype">public  <b>MimeMultipart</b>()</p><div class="classdoc-comment-body"> Default constructor. 
 An empty MimeMultipart object is created. 
 Its content type is set to "multipart/mixed".
 A unique boundary string is generated and this string is set up
 as the "boundary" parameter for the <code>contentType</code> field.
 <p/>
 MimeBodyParts may be added later.
</div><p/><hr/><a name="MimeMultipart(DataSource)"/><h3>MimeMultipart</h3><p class="prototype">public  <b>MimeMultipart</b>(<span class="parameter">DataSource&nbsp;ds</span>)</p><div class="classdoc-comment-body"> Constructs a MimeMultipart object and its bodyparts from the given
 DataSource.
 <p/>
 This constructor handles as a special case the situation where the given
 DataSource is a MultipartDataSource object. In this case, this method 
 just invokes the superclass (i.e., Multipart) constructor that takes a
 MultipartDataSource object.
 <p/>
 Otherwise, the DataSource is assumed to provide a MIME multipart byte
 stream. The parsed flag is set to false. When the data for the body parts
 are needed, the parser extracts the "boundary" parameter from the content
 type of this DataSource, skips the 'preamble' and reads bytes till the
 terminating boundary and creates MimeBodyParts for each part of the 
 stream.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">ds</span> - DataSource, can be a MultipartDataSource</dt></dl><hr/><a name="MimeMultipart(String)"/><h3>MimeMultipart</h3><p class="prototype">public  <b>MimeMultipart</b>(<span class="parameter">String&nbsp;subtype</span>)</p><div class="classdoc-comment-body"> Construct a MimeMultipart object of the given subtype.
 A unique boundary string is generated and this string is set up
 as the "boundary" parameter for the <code>contentType</code> field.
 <p/>
 MimeBodyParts may be added later.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">subtype</span></dt></dl><h1 class="classdoc-header">Method Details</h1><a name="createInternetHeaders(InputStream)"/><h3>createInternetHeaders</h3><p class="prototype">protected InternetHeaders <b>createInternetHeaders</b>(<span class="parameter">InputStream&nbsp;is</span>)</p><div class="classdoc-comment-body"> Create and return an InternetHeaders object that loads the headers 
 from the given InputStream.
 Subclasses can override this method to return a subclass
 of InternetHeaders, if necessary.
 This implementation simply constructs and returns an InternetHeaders 
 object.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">is</span> - the InputStream to read the headers from</dt></dl><hr/><a name="createMimeBodyPart(InputStream)"/><h3>createMimeBodyPart</h3><p class="prototype">protected MimeBodyPart <b>createMimeBodyPart</b>(<span class="parameter">InputStream&nbsp;is</span>)</p><div class="classdoc-comment-body"> Create and return a MimeBodyPart object to represent a body part parsed
 from the InputStream.
 Subclasses can override this method to return a subclass of 
 MimeBodyPart, if necessary. This implementation simply constructs and 
 returns a MimeBodyPart object.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">is</span> - InputStream containing the body part</dt></dl><hr/><a name="createMimeBodyPart(javax.mail.internet.InternetHeaders,byte[])"/><h3>createMimeBodyPart</h3><p class="prototype">protected MimeBodyPart <b>createMimeBodyPart</b>(<span class="parameter"><a href="../../../javax/mail/internet/InternetHeaders.html">InternetHeaders</a>&nbsp;headers,</span> <span class="parameter">byte[]&nbsp;content</span>)</p><div class="classdoc-comment-body"> Create and return a MimeBodyPart object to represent a body part parsed
 from the InputStream.
 Subclasses can override this method to return a subclass of 
 MimeBodyPart, if necessary. This implementation simply constructs and 
 returns a MimeBodyPart object.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">headers</span> - the headers for the body part</dt><dt><span class="prototype-name">content</span> - the content of the body part</dt></dl><hr/><a name="getBodyPart(int)"/><h3>getBodyPart</h3><p class="prototype">public BodyPart <b>getBodyPart</b>(<span class="parameter">int&nbsp;index</span>)</p><div class="classdoc-comment-body"> Get the specified BodyPart.
 BodyParts are numbered starting at 0.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">index</span> - the index of the desired BodyPart</dt></dl><div class="classdoc-tag-section-header">Throws:</div><dl class="classdoc-list"><dt><code><a href="../../../javax/mail/MessagingException.html">MessagingException</a></code> - if no such BodyPart exists</dt></dl><hr/><a name="getBodyPart(String)"/><h3>getBodyPart</h3><p class="prototype">public BodyPart <b>getBodyPart</b>(<span class="parameter">String&nbsp;CID</span>)</p><div class="classdoc-comment-body"> Get the MimeBodyPart referred to by the given ContentID (CID).
 Returns null if the part is not found.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">CID</span> - the ContentID of the desired part</dt></dl><hr/><a name="getCount()"/><h3>getCount</h3><p class="prototype">public int <b>getCount</b>()</p><div class="classdoc-comment-body"> * Return the number of enclosed BodyPart objects.
</div><p/><hr/><a name="parse()"/><h3>parse</h3><p class="prototype">protected void <b>parse</b>()</p><div class="classdoc-comment-body"> Parse the InputStream from our DataSource, constructing the appropriate
 MimeBodyParts.
 The parsed flag is set to true, and if true on entry nothing is done.
 This method is called by all other methods that need data for the body 
 parts, to make sure the data has been parsed.
</div><p/><hr/><a name="setSubType(String)"/><h3>setSubType</h3><p class="prototype">public void <b>setSubType</b>(<span class="parameter">String&nbsp;subtype</span>)</p><div class="classdoc-comment-body"> Set the subtype. 
 This method should be invoked only on a new MimeMultipart object 
 created by the client. The default subtype of such a multipart object 
 is "mixed".
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">subtype</span> - Subtype</dt></dl><hr/><a name="updateHeaders()"/><h3>updateHeaders</h3><p class="prototype">protected void <b>updateHeaders</b>()</p><div class="classdoc-comment-body"> Update headers.
 The default implementation here just calls the <code>updateHeaders</code>
 method on each of its children BodyParts.
 <p/>
 Note that the boundary parameter is already set up when a new and empty
 MimeMultipart object is created.
 <p/>
 This method is called when the <code>saveChanges</code> method is
 invoked on the Message object containing this Multipart.
 This is typically done as part of the Message send process,
 however note that a client is free to call it any number of times.
 So if the header updating process is expensive for a specific 
 MimeMultipart subclass, then it might itself want to track whether
 its internal state actually did change,
 and do the header updating only if necessary.
</div><p/><hr/><a name="writeTo(OutputStream)"/><h3>writeTo</h3><p class="prototype">public void <b>writeTo</b>(<span class="parameter">OutputStream&nbsp;os</span>)</p><div class="classdoc-comment-body"> Iterates through all the parts and outputs each Mime part 
 separated by a boundary.
</div><p/><div class="classdoc-tag-section-header">Parameters:</div><dl class="classdoc-list"><dt><span class="prototype-name">os</span></dt></dl><div class="classdoc-tag-section-header">Throws:</div><dl class="classdoc-list"><dt><code/> - if an IO related exception occurs</dt></dl><hr class="footer"/><div class="footer">Generated on
  October 6, 2004
  by <a target="cptoolsinfo" href="http://www.gnu.org/software/cp-tools">GNU Classpath Tools</a> (Gjdoc XmlDoclet 0.6.1).</div></body></html>